# Architecture Decision Records (ADR)

このディレクトリには、プロジェクトで下した重要な設計判断が記録されています。

---

## 📌 このディレクトリについて

このディレクトリには、**サンプルADR**が含まれています。

### サンプルADRの扱い

- **001-multi-domain-architecture.md**: 実際のプロジェクトで下したマルチドメイン設計の判断
- **003-e2e-auth-bypass.md**: E2E認証バイパス機構の設計判断

これらは**参考例**です。新しいプロジェクトでは：
1. 参考になる場合は残す
2. 不要な場合は削除
3. プロジェクト固有のADRを追加

---

## 📜 ADRとは

ADR（Architecture Decision Record）は、アーキテクチャ上の重要な判断を記録するドキュメントです。

### なぜADRが必要か

1. **判断の背景を記録**: なぜその選択をしたのか
2. **代替案の記録**: 何を検討して何を棄却したのか
3. **将来の参考**: 同じ議論を繰り返さない
4. **新メンバーへの説明**: 過去の判断を理解できる

---

## 📋 サンプルADR一覧

| ID | タイトル | ステータス | 日付 | 概要 |
|----|---------|-----------|------|------|
| [001](./001-multi-domain-architecture.md) | マルチドメインアーキテクチャの採用 | Accepted | 2025-01-15 | 4つのドメイン（WWW, APP, ADMIN, OPS）を使用 |
| [003](./003-e2e-auth-bypass.md) | E2E用認証バイパス機構 | Accepted | 2025-10-25 | テスト専用の擬似認証エンドポイントを作成 |

**注意**: 新しいプロジェクトでは、この表を削除して自分のADRを追加してください。

---

## 📝 ADRテンプレート

新しいADRを作成する際は、以下のテンプレートを使用してください：

```markdown
# ADR-XXX: [タイトル]

**日付**: YYYY-MM-DD
**ステータス**: Proposed | Accepted | Deprecated | Superseded
**決定者**: [名前]

## コンテキスト

[この判断が必要になった背景と状況]

## 検討した選択肢

### 選択肢1: [名前]

**メリット**:
- ...

**デメリット**:
- ...

### 選択肢2: [名前]

...

## 決定内容

[選択した選択肢とその理由]

## 結果

[この判断による影響]

**メリット**:
- ...

**デメリット**:
- ...

**トレードオフ**:
- ...

## 関連資料

- [実装ログ](...)
- [パターン](...)
```

---

## 🎯 ADRを書くべきタイミング

### 書くべき

- ✅ アーキテクチャの大きな方針を決定したとき
- ✅ 技術スタックを選択したとき
- ✅ 複数の選択肢があり、議論が必要なとき
- ✅ 将来的に見直す可能性があるとき

### 書かなくてよい

- ❌ 実装の詳細（パターンカタログで十分）
- ❌ 明らかな選択（議論の余地がない）
- ❌ 一時的な回避策

---

## 🔄 ADRのステータス

- **Proposed**: 提案段階
- **Accepted**: 採用決定
- **Deprecated**: 廃止予定
- **Superseded**: 別のADRに置き換えられた

---

## 💡 良いADRの書き方

### DO（やるべきこと）

- ✅ 背景を詳しく書く（なぜ判断が必要だったか）
- ✅ 代替案を全て列挙する
- ✅ メリット・デメリットを客観的に記載
- ✅ 将来の自分が読んで理解できるように書く

### DON'T（やってはいけないこと）

- ❌ 結論だけを書く（背景がないと意味がない）
- ❌ 選択した理由を書かない
- ❌ 感情的な表現を使う

---

## 📚 参考資料

- [ADRの書き方（英語）](https://adr.github.io/)
- [サンプルADR](./001-multi-domain-architecture.md)

---

このADRカタログにより、**設計判断の背景を理解し、同じ議論を繰り返さない**ことができます。
